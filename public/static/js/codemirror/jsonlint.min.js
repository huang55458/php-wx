!function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(d){"use strict";var p="CodeMirror-lint-markers";function l(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,r){t=t,e=e,(n=document.createElement("div")).className="CodeMirror-lint-tooltip",n.appendChild(e.cloneNode(!0)),document.body.appendChild(n),d.on(document,"mousemove",o),o(t),null!=n.style.opacity&&(n.style.opacity=1);var n,i=n;function o(t){if(!n.parentNode)return d.off(document,"mousemove",o);n.style.top=Math.max(0,t.clientY-n.offsetHeight-5)+"px",n.style.left=t.clientX+5+"px"}function a(){var t;d.off(r,"mouseout",a),i&&((t=i).parentNode&&(null==t.style.opacity&&l(t),t.style.opacity=0,setTimeout(function(){l(t)},600)),i=null)}var s=setInterval(function(){if(i)for(var t=r;;t=t.parentNode){if((t=t&&11==t.nodeType?t.host:t)==document.body)return;if(!t){a();break}}if(!i)return clearInterval(s)},400);d.on(r,"mouseout",a)}function a(f,t,e){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=e,this.onMouseOver=function(t){var e=f,r=t.target||t.srcElement;if(/\bCodeMirror-lint-mark-/.test(r.className)){for(var r=r.getBoundingClientRect(),n=(r.left+r.right)/2,r=(r.top+r.bottom)/2,i=e.findMarksAt(e.coordsChar({left:n,top:r},"client")),o=[],a=0;a<i.length;++a){var s=i[a].__annotation;s&&o.push(s)}if(o.length){for(var l=o,e=t,n=e.target||e.srcElement,c=document.createDocumentFragment(),u=0;u<l.length;u++)c.appendChild(y(l[u]));h(e,c,n)}}},this.waitingFor=0}function m(t){var e=t.state.lint;e.hasGutter&&t.clearGutter(p);for(var r=0;r<e.marked.length;++r)e.marked[r].clear();e.marked.length=0}function y(t){var e=(e=t.severity)||"error",r=document.createElement("div");return r.className="CodeMirror-lint-message-"+e,void 0!==t.messageHTML?r.innerHTML=t.messageHTML:r.appendChild(document.createTextNode(t.message)),r}function s(e){var t,r,n,i,o,a=e.state.lint.options,s=a.options||a,l=a.getAnnotations||e.getHelper(d.Pos(0,0),"lint");function c(){o=-1,r.off("change",c)}l&&(a.async||l.async?(a=l,n=s,i=(r=e).state.lint,o=++i.waitingFor,r.on("change",c),a(r.getValue(),function(t,e){r.off("change",c),i.waitingFor==o&&(e&&t instanceof d&&(t=e),r.operation(function(){u(r,t)}))},n,r)):(t=l(e.getValue(),s,e))&&(t.then?t.then(function(t){e.operation(function(){u(e,t)})}):e.operation(function(){u(e,t)})))}function u(t,e){m(t);for(var r=t.state.lint,n=r.options,i=function(t){for(var e=[],r=0;r<t.length;++r){var n=t[r],i=n.from.line;(e[i]||(e[i]=[])).push(n)}return e}(e),o=0;o<i.length;++o){var a=i[o];if(a){for(var s=null,l=r.hasGutter&&document.createDocumentFragment(),c=0;c<a.length;++c){var u=a[c],f=(f=u.severity)||"error",s="error"==s?s:f;n.formatAnnotation&&(u=n.formatAnnotation(u)),r.hasGutter&&l.appendChild(y(u)),u.to&&r.marked.push(t.markText(u.from,u.to,{className:"CodeMirror-lint-mark-"+f,__annotation:u}))}r.hasGutter&&t.setGutterMarker(o,p,function(e,t,r,n){var i=document.createElement("div"),o=i;return i.className="CodeMirror-lint-marker-"+t,r&&((o=i.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=n&&d.on(o,"mouseover",function(t){h(t,e,o)}),i}(l,s,1<a.length,r.options.tooltips))}}n.onUpdateLinting&&n.onUpdateLinting(e,i,t)}function c(t){var e=t.state.lint;e&&(clearTimeout(e.timeout),e.timeout=setTimeout(function(){s(t)},e.options.delay||500))}d.defineOption("lint",!1,function(t,e,r){if(r&&r!=d.Init&&(m(t),!1!==t.state.lint.options.lintOnChange&&t.off("change",c),d.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver),clearTimeout(t.state.lint.timeout),delete t.state.lint),e){for(var n=t.getOption("gutters"),i=!1,o=0;o<n.length;++o)n[o]==p&&(i=!0);r=t.state.lint=new a(t,e instanceof Function?{getAnnotations:e}:e&&!0!==e?e:{},i);!1!==r.options.lintOnChange&&t.on("change",c),0!=r.options.tooltips&&"gutter"!=r.options.tooltips&&d.on(t.getWrapperElement(),"mouseover",r.onMouseOver),s(t)}}),d.defineExtension("performLint",function(){this.state.lint&&s(this)})}),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(Qt){"use strict";Qt.defineMode("javascript",function(t,u){var e,V,q,r,f=t.indentUnit,F=u.statementIndent,J=u.jsonld,a=u.json||J,c=u.typescript,z=u.wordCharacters||/[\w$\xa1-\uffff]/,P=(t=n("keyword a"),r=n("keyword b"),e=n("keyword c"),V=n("keyword d"),q=n("operator"),{if:n("if"),while:t,with:t,else:r,do:r,try:r,finally:r,return:V,break:V,continue:V,new:n("new"),delete:e,void:e,throw:e,debugger:n("debugger"),var:n("var"),const:n("var"),let:n("var"),function:n("function"),catch:n("catch"),for:n("for"),switch:n("switch"),case:n("case"),default:n("default"),in:q,typeof:q,instanceof:q,true:t={type:"meta",style:"meta"},false:t,True:t,False:t,None:r={type:"atom",style:"atom"},null:r,NULL:r,Null:r,undefined:r,NaN:r,Infinity:r,this:n("this"),class:n("class"),super:n("atom"),yield:e,export:n("export"),import:n("import"),extends:e,await:e});function n(t){return{type:t,style:"keyword"}}var i,U,G=/[+\-*&%=<>!?|~^@]/,R=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function o(t,e,r){return i=t,U=r,e}function d(t,e){var i,r=t.next();if('"'==r||"'"==r)return e.tokenize=(i=r,function(t,e){var r,n=!1;if(J&&"@"==t.peek()&&t.match(R))return e.tokenize=d,o("jsonld-keyword","meta");for(;null!=(r=t.next())&&(r!=i||n);)n=!n&&"\\"==r;return n||(e.tokenize=d),o("string","string")}),e.tokenize(t,e);if("."==r&&t.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return o("number","number");if("."==r&&t.match(".."))return o("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(r))return o(r);if("="==r&&t.eat(">"))return o("=>","operator");if("0"==r&&t.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return o("number","number");if(/\d/.test(r))return t.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),o("number","number");if("/"==r)return t.eat("*")?(e.tokenize=H)(t,e):t.eat("/")?(t.skipToEnd(),o("comment","comment")):Kt(t,e,1)?(function(t){for(var e,r=!1,n=!1;null!=(e=t.next());){if(!r){if("/"==e&&!n)return;"["==e?n=!0:n&&"]"==e&&(n=!1)}r=!r&&"\\"==e}}(t),t.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),o("regexp","string-2")):(t.eat("="),o("operator","operator",t.current()));if("`"==r)return(e.tokenize=B)(t,e);if("#"==r)return t.skipToEnd(),o("error","error");if("<"==r&&t.match("!--")||"-"==r&&t.match("->"))return t.skipToEnd(),o("comment","comment");if(G.test(r))return">"==r&&e.lexical&&">"==e.lexical.type||(t.eat("=")?"!"!=r&&"="!=r||t.eat("="):/[<>*+\-]/.test(r)&&(t.eat(r),">"==r)&&t.eat(r)),o("operator","operator",t.current());if(z.test(r)){t.eatWhile(z);r=t.current();if("."!=e.lastType){if(P.propertyIsEnumerable(r))return o((e=P[r]).type,e.style,r);if("async"==r&&t.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return o("async","keyword",r)}return o("variable","variable",r)}}function H(t,e){for(var r,n=!1;r=t.next();){if("/"==r&&n){e.tokenize=d;break}n="*"==r}return o("comment","comment")}function B(t,e){for(var r,n=!1;null!=(r=t.next());){if(!n&&("`"==r||"$"==r&&t.eat("{"))){e.tokenize=d;break}n=!n&&"\\"==r}return o("quasi","string-2",t.current())}function D(t,e){e.fatArrowAt&&(e.fatArrowAt=null);var r=t.string.indexOf("=>",t.start);if(!(r<0)){for(var n,i=0,o=!1,a=(r=c&&(n=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(t.string.slice(t.start,r)))?n.index:r)-1;0<=a;--a){var s=t.string.charAt(a),l="([{}])".indexOf(s);if(0<=l&&l<3){if(!i){++a;break}if(0==--i){"("==s&&(o=!0);break}}else if(3<=l&&l<6)++i;else if(z.test(s))o=!0;else if(/["'\/`]/.test(s))for(;;--a){if(0==a)return;if(t.string.charAt(a-1)==s&&"\\"!=t.string.charAt(a-2)){a--;break}}else if(o&&!i){++a;break}}o&&!i&&(e.fatArrowAt=a)}}var W={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function X(t,e,r,n,i,o){this.indented=t,this.column=e,this.type=r,this.prev=i,this.info=o,null!=n&&(this.align=n)}function Y(t,e,r,n,i){var o=t.cc;for(s.state=t,s.stream=i,s.marked=null,s.cc=o,s.style=e,t.lexical.hasOwnProperty("align")||(t.lexical.align=!0);;)if((o.length?o.pop():a?x:b)(r,n)){for(;o.length&&o[o.length-1].lex;)o.pop()();return s.marked?s.marked:"variable"==r&&function(t,e){for(var r=t.localVars;r;r=r.next)if(r.name==e)return 1;for(var n=t.context;n;n=n.prev)for(r=n.vars;r;r=r.next)if(r.name==e)return 1}(t,n)?"variable-2":e}}var s={state:null,column:null,marked:null,cc:null};function l(){for(var t=arguments.length-1;0<=t;t--)s.cc.push(arguments[t])}function p(){return l.apply(null,arguments),!0}function K(t,e){for(var r=e;r;r=r.next)if(r.name==t)return 1}function h(t){var e=s.state;if(s.marked="def",e.context)if("var"==e.lexical.info&&e.context&&e.context.block){var r=function t(e,r){{var n;return r?r.block?(n=t(e,r.prev))?n==r.prev?r:new Z(n,r.vars,!0):null:K(e,r.vars)?r:new Z(r.prev,new tt(e,r.vars),!1):null}}(t,e.context);if(null!=r)return void(e.context=r)}else if(!K(t,e.localVars))return void(e.localVars=new tt(t,e.localVars));u.globalVars&&!K(t,e.globalVars)&&(e.globalVars=new tt(t,e.globalVars))}function Q(t){return"public"==t||"private"==t||"protected"==t||"abstract"==t||"readonly"==t}function Z(t,e,r){this.prev=t,this.vars=e,this.block=r}function tt(t,e){this.name=t,this.next=e}var et=new tt("this",new tt("arguments",null));function m(){s.state.context=new Z(s.state.context,s.state.localVars,!1),s.state.localVars=et}function rt(){s.state.context=new Z(s.state.context,s.state.localVars,!0),s.state.localVars=null}function y(){s.state.localVars=s.state.context.vars,s.state.context=s.state.context.prev}function v(n,i){function t(){var t=s.state,e=t.indented;if("stat"==t.lexical.type)e=t.lexical.indented;else for(var r=t.lexical;r&&")"==r.type&&r.align;r=r.prev)e=r.indented;t.lexical=new X(e,s.stream.column(),n,null,t.lexical,i)}return t.lex=!0,t}function g(){var t=s.state;t.lexical.prev&&(")"==t.lexical.type&&(t.indented=t.lexical.indented),t.lexical=t.lexical.prev)}function k(r){return function t(e){return e==r?p():";"==r||"}"==e||")"==e||"]"==e?l():p(t)}}function b(t,e){return"var"==t?p(v("vardef",e),Ot,k(";"),g):"keyword a"==t?p(v("form"),it,b,g):"keyword b"==t?p(v("form"),b,g):"keyword d"==t?s.stream.match(/^\s*$/,!1)?p():p(v("stat"),at,k(";"),g):"debugger"==t?p(k(";")):"{"==t?p(v("}"),rt,gt,g,y):";"==t?p():"if"==t?("else"==s.state.lexical.info&&s.state.cc[s.state.cc.length-1]==g&&s.state.cc.pop()(),p(v("form"),it,b,g,Ct)):"function"==t?p(C):"for"==t?p(v("form"),$t,b,g):"class"==t||c&&"interface"==e?(s.marked="keyword",p(v("form","class"==t?t:e),Ft,g)):"variable"==t?c&&"declare"==e?(s.marked="keyword",p(b)):c&&("module"==e||"enum"==e||"type"==e)&&s.stream.match(/^\s*\w/,!1)?(s.marked="keyword","enum"==e?p(Xt):"type"==e?p(Vt,k("operator"),O,k(";")):p(v("form"),A,k("{"),v("}"),gt,g,g)):c&&"namespace"==e?(s.marked="keyword",p(v("form"),x,b,g)):c&&"abstract"==e?(s.marked="keyword",p(b)):p(v("stat"),pt):"switch"==t?p(v("form"),it,k("{"),v("}","switch"),rt,gt,g,g,y):"case"==t?p(x,k(":")):"default"==t?p(k(":")):"catch"==t?p(v("form"),m,nt,b,g,y):"export"==t?p(v("stat"),Pt,g):"import"==t?p(v("stat"),Gt,g):"async"==t?p(b):"@"==e?p(x,b):l(v("stat"),x,k(";"),g)}function nt(t){if("("==t)return p(T,k(")"))}function x(t,e){return ot(t,e,!1)}function w(t,e){return ot(t,e,!0)}function it(t){return"("!=t?l():p(v(")"),x,k(")"),g)}function ot(t,e,r){if(s.state.fatArrowAt==s.stream.start){var n=r?ut:ct;if("("==t)return p(m,v(")"),N(T,")"),g,k("=>"),n,y);if("variable"==t)return l(m,A,k("=>"),n,y)}var i,n=r?E:_;return W.hasOwnProperty(t)?p(n):"function"==t?p(C,n):"class"==t||c&&"interface"==e?(s.marked="keyword",p(v("form"),qt,g)):"keyword c"==t||"async"==t?p(r?w:x):"("==t?p(v(")"),at,k(")"),g,n):"operator"==t||"spread"==t?p(r?w:x):"["==t?p(v("]"),Wt,g,n):"{"==t?vt(mt,"}",null,n):"quasi"==t?l(st,n):"new"==t?p((i=r,function(t){return"."==t?p(i?dt:ft):"variable"==t&&c?p(jt,i?E:_):l(i?w:x)})):"import"==t?p(x):p()}function at(t){return t.match(/[;\}\)\],]/)?l():l(x)}function _(t,e){return","==t?p(x):E(t,e,!1)}function E(t,e,r){var n=0==r?_:E,i=0==r?x:w;return"=>"==t?p(m,r?ut:ct,y):"operator"==t?/\+\+|--/.test(e)||c&&"!"==e?p(n):c&&"<"==e&&s.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?p(v(">"),N(O,">"),g,n):"?"==e?p(x,k(":"),i):p(i):"quasi"==t?l(st,n):";"!=t?"("==t?vt(w,")","call",n):"."==t?p(ht,n):"["==t?p(v("]"),at,k("]"),g,n):c&&"as"==e?(s.marked="keyword",p(O,n)):"regexp"==t?(s.state.lastType=s.marked="operator",s.stream.backUp(s.stream.pos-s.stream.start-1),p(i)):void 0:void 0}function st(t,e){return"quasi"!=t?l():"${"!=e.slice(e.length-2)?p(st):p(x,lt)}function lt(t){if("}"==t)return s.marked="string-2",s.state.tokenize=B,p(st)}function ct(t){return D(s.stream,s.state),l("{"==t?b:x)}function ut(t){return D(s.stream,s.state),l("{"==t?b:w)}function ft(t,e){if("target"==e)return s.marked="keyword",p(_)}function dt(t,e){if("target"==e)return s.marked="keyword",p(E)}function pt(t){return":"==t?p(g,b):l(_,k(";"),g)}function ht(t){if("variable"==t)return s.marked="property",p()}function mt(t,e){var r;return"async"==t?(s.marked="property",p(mt)):"variable"==t||"keyword"==s.style?(s.marked="property","get"==e||"set"==e?p(yt):(c&&s.state.fatArrowAt==s.stream.start&&(r=s.stream.match(/^\s*:\s*/,!1))&&(s.state.fatArrowAt=s.stream.pos+r[0].length),p(j))):"number"==t||"string"==t?(s.marked=J?"property":s.style+" property",p(j)):"jsonld-keyword"==t?p(j):c&&Q(e)?(s.marked="keyword",p(mt)):"["==t?p(x,M,k("]"),j):"spread"==t?p(w,j):"*"==e?(s.marked="keyword",p(mt)):":"==t?l(j):void 0}function yt(t){return"variable"!=t?l(j):(s.marked="property",p(C))}function j(t){return":"==t?p(w):"("==t?l(C):void 0}function N(n,i,o){function a(t,e){var r;return(o?-1<o.indexOf(t):","==t)?("call"==(r=s.state.lexical).info&&(r.pos=(r.pos||0)+1),p(function(t,e){return t==i||e==i?l():l(n)},a)):t==i||e==i?p():o&&-1<o.indexOf(";")?l(n):p(k(i))}return function(t,e){return t==i||e==i?p():l(n,a)}}function vt(t,e,r){for(var n=3;n<arguments.length;n++)s.cc.push(arguments[n]);return p(v(e,r),N(t,e),g)}function gt(t){return"}"==t?p():l(b,gt)}function M(t,e){if(c)return":"==t?p(O):"?"==e?p(M):void 0}function kt(t,e){if(c&&(":"==t||"in"==e))return p(O)}function bt(t){if(c&&":"==t)return s.stream.match(/^\s*\w+\s+is\b/,!1)?p(x,xt,O):p(O)}function xt(t,e){if("is"==e)return s.marked="keyword",p()}function O(t,e){return"keyof"==e||"typeof"==e||"infer"==e?(s.marked="keyword",p("typeof"==e?w:O)):"variable"==t||"void"==e?(s.marked="type",p(S)):"|"==e||"&"==e?p(O):"string"==t||"number"==t||"atom"==t?p(S):"["==t?p(v("]"),N(O,"]",","),g,S):"{"==t?p(v("}"),N(_t,"}",",;"),g,S):"("==t?p(N(Et,")"),wt,S):"<"==t?p(N(O,">"),O):void 0}function wt(t){if("=>"==t)return p(O)}function _t(t,e){return"variable"==t||"keyword"==s.style?(s.marked="property",p(_t)):"?"==e||"number"==t||"string"==t?p(_t):":"==t?p(O):"["==t?p(k("variable"),kt,k("]"),_t):"("==t?l($,_t):void 0}function Et(t,e){return"variable"==t&&s.stream.match(/^\s*[?:]/,!1)||"?"==e?p(Et):":"==t?p(O):"spread"==t?p(Et):l(O)}function S(t,e){return"<"==e?p(v(">"),N(O,">"),g,S):"|"==e||"."==t||"&"==e?p(O):"["==t?p(O,k("]"),S):"extends"==e||"implements"==e?(s.marked="keyword",p(O)):"?"==e?p(O,k(":"),O):void 0}function jt(t,e){if("<"==e)return p(v(">"),N(O,">"),g,S)}function Nt(){return l(O,Mt)}function Mt(t,e){if("="==e)return p(O)}function Ot(t,e){return"enum"==e?(s.marked="keyword",p(Xt)):l(A,M,I,It)}function A(t,e){return c&&Q(e)?(s.marked="keyword",p(A)):"variable"==t?(h(e),p()):"spread"==t?p(A):"["==t?vt(At,"]"):"{"==t?vt(St,"}"):void 0}function St(t,e){return"variable"!=t||s.stream.match(/^\s*:/,!1)?("variable"==t&&(s.marked="property"),"spread"==t?p(A):"}"==t?l():"["==t?p(x,k("]"),k(":"),St):p(k(":"),A,I)):(h(e),p(I))}function At(){return l(A,I)}function I(t,e){if("="==e)return p(w)}function It(t){if(","==t)return p(Ot)}function Ct(t,e){if("keyword b"==t&&"else"==e)return p(v("form","else"),b,g)}function $t(t,e){return"await"==e?p($t):"("==t?p(v(")"),Tt,g):void 0}function Tt(t){return"var"==t?p(Ot,Lt):("variable"==t?p:l)(Lt)}function Lt(t,e){return")"==t?p():";"==t?p(Lt):("in"==e||"of"==e?(s.marked="keyword",p):l)(x,Lt)}function C(t,e){return"*"==e?(s.marked="keyword",p(C)):"variable"==t?(h(e),p(C)):"("==t?p(m,v(")"),N(T,")"),g,bt,b,y):c&&"<"==e?p(v(">"),N(Nt,">"),g,C):void 0}function $(t,e){return"*"==e?(s.marked="keyword",p($)):"variable"==t?(h(e),p($)):"("==t?p(m,v(")"),N(T,")"),g,bt,y):c&&"<"==e?p(v(">"),N(Nt,">"),g,$):void 0}function Vt(t,e){return"keyword"==t||"variable"==t?(s.marked="type",p(Vt)):"<"==e?p(v(">"),N(Nt,">"),g):void 0}function T(t,e){return"@"==e&&p(x,T),"spread"==t?p(T):c&&Q(e)?(s.marked="keyword",p(T)):c&&"this"==t?p(M,I):l(A,M,I)}function qt(t,e){return("variable"==t?Ft:Jt)(t,e)}function Ft(t,e){if("variable"==t)return h(e),p(Jt)}function Jt(t,e){return"<"==e?p(v(">"),N(Nt,">"),g,Jt):"extends"==e||"implements"==e||c&&","==t?("implements"==e&&(s.marked="keyword"),p(c?O:x,Jt)):"{"==t?p(v("}"),L,g):void 0}function L(t,e){return"async"==t||"variable"==t&&("static"==e||"get"==e||"set"==e||c&&Q(e))&&s.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(s.marked="keyword",p(L)):"variable"==t||"keyword"==s.style?(s.marked="property",p(c?zt:C,L)):"number"==t||"string"==t?p(c?zt:C,L):"["==t?p(x,M,k("]"),c?zt:C,L):"*"==e?(s.marked="keyword",p(L)):c&&"("==t?l($,L):";"==t||","==t?p(L):"}"==t?p():"@"==e?p(x,L):void 0}function zt(t,e){return"?"==e?p(zt):":"==t?p(O,I):"="==e?p(w):l((t=s.state.lexical.prev)&&"interface"==t.info?$:C)}function Pt(t,e){return"*"==e?(s.marked="keyword",p(Dt,k(";"))):"default"==e?(s.marked="keyword",p(x,k(";"))):"{"==t?p(N(Ut,"}"),Dt,k(";")):l(b)}function Ut(t,e){return"as"==e?(s.marked="keyword",p(k("variable"))):"variable"==t?l(w,Ut):void 0}function Gt(t){return"string"==t?p():"("==t?l(x):l(Rt,Ht,Dt)}function Rt(t,e){return"{"==t?vt(Rt,"}"):("variable"==t&&h(e),"*"==e&&(s.marked="keyword"),p(Bt))}function Ht(t){if(","==t)return p(Rt,Ht)}function Bt(t,e){if("as"==e)return s.marked="keyword",p(Rt)}function Dt(t,e){if("from"==e)return s.marked="keyword",p(x)}function Wt(t){return"]"==t?p():l(N(w,"]"))}function Xt(){return l(v("form"),A,k("{"),v("}"),N(Yt,"}"),g,g)}function Yt(){return l(A,I)}function Kt(t,e,r){return e.tokenize==d&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(e.lastType)||"quasi"==e.lastType&&/\{\s*$/.test(t.string.slice(0,t.pos-(r||0)))}return g.lex=y.lex=!0,{startState:function(t){t={tokenize:d,lastType:"sof",cc:[],lexical:new X((t||0)-f,0,"block",!1),localVars:u.localVars,context:u.localVars&&new Z(null,null,!1),indented:t||0};return u.globalVars&&"object"==typeof u.globalVars&&(t.globalVars=u.globalVars),t},token:function(t,e){var r;return t.sol()&&(e.lexical.hasOwnProperty("align")||(e.lexical.align=!1),e.indented=t.indentation(),D(t,e)),e.tokenize!=H&&t.eatSpace()?null:(r=e.tokenize(t,e),"comment"==i?r:(e.lastType="operator"!=i||"++"!=U&&"--"!=U?i:"incdec",Y(e,r,i,U,t)))},indent:function(t,e){if(t.tokenize==H)return Qt.Pass;if(t.tokenize!=d)return 0;var r,n=e&&e.charAt(0),i=t.lexical;if(!/^\s*else\b/.test(e))for(var o=t.cc.length-1;0<=o;--o){var a=t.cc[o];if(a==g)i=i.prev;else if(a!=Ct)break}for(;("stat"==i.type||"form"==i.type)&&("}"==n||(r=t.cc[t.cc.length-1])&&(r==_||r==E)&&!/^[,\.=+\-*:?[\(]/.test(e));)i=i.prev;var s,l=(i=F&&")"==i.type&&"stat"==i.prev.type?i.prev:i).type,c=n==l;return"vardef"==l?i.indented+("operator"==t.lastType||","==t.lastType?i.info.length+1:0):"form"==l&&"{"==n?i.indented:"form"==l?i.indented+f:"stat"==l?i.indented+(l=e,"operator"==(s=t).lastType||","==s.lastType||G.test(l.charAt(0))||/[,.]/.test(l.charAt(0))?F||f:0):"switch"!=i.info||c||0==u.doubleIndentSwitch?i.align?i.column+(c?0:1):i.indented+(c?0:f):i.indented+(/^(?:case|default)\b/.test(e)?f:2*f)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:a?null:"/*",blockCommentEnd:a?null:"*/",blockCommentContinue:a?null:" * ",lineComment:a?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:a?"json":"javascript",jsonldMode:J,jsonMode:a,expressionAllowed:Kt,skipExpression:function(t){var e=t.cc[t.cc.length-1];e!=x&&e!=w||t.cc.pop()}}}),Qt.registerHelper("wordChars","javascript",/[\w$]/),Qt.defineMIME("text/javascript","javascript"),Qt.defineMIME("text/ecmascript","javascript"),Qt.defineMIME("application/javascript","javascript"),Qt.defineMIME("application/x-javascript","javascript"),Qt.defineMIME("application/ecmascript","javascript"),Qt.defineMIME("application/json",{name:"javascript",json:!0}),Qt.defineMIME("application/x-json",{name:"javascript",json:!0}),Qt.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),Qt.defineMIME("text/typescript",{name:"javascript",typescript:!0}),Qt.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var jsonlint=function(){var t={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,r,n,i,o,a){var s=o.length-1;switch(i){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=o[s-1];case 13:this.$={};break;case 14:this.$=o[s-1];break;case 15:this.$=[o[s-2],o[s]];break;case 16:this.$={},this.$[o[s][0]]=o[s][1];break;case 17:this.$=o[s-2],o[s-2][o[s][0]]=o[s][1];break;case 18:this.$=[];break;case 19:this.$=o[s-1];break;case 20:this.$=[o[s]];break;case 21:this.$=o[s-2],o[s-2].push(o[s])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=this,r=[0],n=[null],i=[],o=this.table,a="",s=0,l=0,c=0,u=(this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={}),this.lexer.yylloc);function f(){var t=e.lexer.lex()||1;return t="number"!=typeof t?e.symbols_[t]||t:t}i.push(u),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,p,h,m,y,v,g,k,b,x={};;){if(h=r[r.length-1],void 0===(m=this.defaultActions[h]||(null==d&&(d=f()),o[h]&&o[h][d]))||!m.length||!m[0]){if(!c){for(y in k=[],o[h])this.terminals_[y]&&2<y&&k.push("'"+this.terminals_[y]+"'");var w="",w=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+this.terminals_[d]+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'");this.parseError(w,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:u,expected:k})}if(3==c){if(1==d)throw new Error(w||"Parsing halted.");l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,d=f()}for(;;){if(2..toString()in o[h])break;if(0==h)throw new Error(w||"Parsing halted.");b=1,r.length=r.length-2*b,n.length=n.length-b,i.length=i.length-b,h=r[r.length-1]}p=d,d=2,m=o[h=r[r.length-1]]&&o[h][2],c=3}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+h+", token: "+d);switch(m[0]){case 1:r.push(d),n.push(this.lexer.yytext),i.push(this.lexer.yylloc),r.push(m[1]),d=null,p?(d=p,p=null):(l=this.lexer.yyleng,a=this.lexer.yytext,s=this.lexer.yylineno,u=this.lexer.yylloc,0<c&&c--);break;case 2:if(v=this.productions_[m[1]][1],x.$=n[n.length-v],x._$={first_line:i[i.length-(v||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(v||1)].first_column,last_column:i[i.length-1].last_column},void 0!==(g=this.performAction.call(x,a,l,s,this.yy,m[1],n,i)))return g;v&&(r=r.slice(0,-1*v*2),n=n.slice(0,-1*v),i=i.slice(0,-1*v)),r.push(this.productions_[m[1]][0]),n.push(x.$),i.push(x._$),g=o[r[r.length-2]][r[r.length-1]],r.push(g);break;case 3:return!0}}return!0}},e={EOF:1,parseError:function(t,e){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.match+=t,this.matched+=t,t.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),t},unput:function(t){return this._input=t+this._input,this},more:function(){return this._more=!0,this},less:function(t){this._input=this.match.slice(t)+this._input},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var t,e,r,n,i=this._currentRules(),o=0;o<i.length&&(!(e=this._input.match(this.rules[i[o]]))||t&&!(e[0].length>t[0].length)||(t=e,r=o,this.options.flex));o++);return t?((n=t[0].match(/\n.*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,i[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,r,n){switch(r){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return t.lexer=e,t}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=jsonlint,exports.parse=function(){return jsonlint.parse.apply(jsonlint,arguments)},exports.main=function(t){var e;if(t[1])return e="undefined"!=typeof process?require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8"):require("file").path(require("file").cwd()).join(t[1]).read({charset:"utf-8"}),exports.parser.parse(e);throw new Error("Usage: "+t[0]+" FILE")},"undefined"!=typeof module)&&require.main===module&&exports.main("undefined"!=typeof process?process.argv.slice(1):require("system").args),function(t){"object"==typeof exports&&"object"==typeof module?t(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)}(function(n){n.registerHelper("lint","json",function(t){var r=[];if(!window.jsonlint)return window.console&&window.console.error("Error: window.jsonlint not defined, CodeMirror JSON linting cannot run."),r;if(""!==t){var e=window.jsonlint.parser||window.jsonlint;e.parseError=function(t,e){e=e.loc;r.push({from:n.Pos(e.first_line-1,e.first_column),to:n.Pos(e.last_line-1,e.last_column),message:t})};try{e.parse(t)}catch(t){}return r}})}),require=function n(i,o,a){function s(e,t){if(!o[e]){if(!i[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=o[e]={exports:{}},i[e][0].call(r.exports,function(t){return s(i[e][1][t]||t)},r,r.exports,n,i,o,a)}return o[e].exports}for(var l="function"==typeof require&&require,t=0;t<a.length;t++)s(a[t]);return s}({jsonsort:[function(t,e,r){function o(e,r){r=r||!1;var n={};return"[object Array]"===Object.prototype.toString.call(e)?((n=r?e:e.sort()).forEach(function(t,e){n[e]=o(t,r)}),r||(n=n.sort(function(t,e){return(t=JSON.stringify(t))<(e=JSON.stringify(e))?-1:e<t?1:0}))):"[object Object]"===Object.prototype.toString.call(e)?(n={},Object.keys(e).sort(function(t,e){return t.toLowerCase()<e.toLowerCase()?-1:t.toLowerCase()>e.toLowerCase()?1:0}).forEach(function(t){n[t]=o(e[t],r)})):n=e,n}function a(t){return t=(t=t.replace(/,[ \t\r\n]+}/g,"}")).replace(/,[ \t\r\n]+]/g,"]")}e.exports={sort:function(t,e){var r,n,i;if(t)try{t=a(t),n=JSON.parse(t),i=o(n,e),r=JSON.stringify(i,null,5)}catch(t){throw t}return r},sortObj:o,cleanJSON:a}},{}]},{},[]);